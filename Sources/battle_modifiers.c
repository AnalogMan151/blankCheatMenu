// Filename: battle_modifiers.c

#include "cheats.h"
#include "hid.h"

/********************************
 *                              *
 *      Battle Modifiers        *
 *                              *
 ********************************/

//Sets all in-battle stats to +6 ranks

void    updateBattleStats(void) {
    if (READU32(0x0029A048) != 0xEA0BEE6C)
        xsprintf(statusBattleStats, "Enable  Stat Stages +6");
    else
        xsprintf(statusBattleStats, "Disable Stat Stages +6");
}

void    maxBattleStats(void) {
    u32    offset;
    u32    address;
    static u32  original;

    if (READU32(0x0029A048) != 0xEA0BEE6C) {
        original = READU32(0x0029A048);

        offset = 0x00595A00;
        static const u8    buffer[] =
        {
            0x80, 0x20, 0x9F, 0xE5, 0x0E, 0x00, 0x52, 0xE1,
            0x1D, 0x00, 0x00, 0x1A, 0x1F, 0x00, 0x2D, 0xE9,
            0x74, 0x20, 0x9F, 0xE5, 0xD0, 0x00, 0x94, 0xE5,
            0x04, 0x30, 0x80, 0xE2, 0x1C, 0x40, 0x80, 0xE2,
            0x04, 0x10, 0x93, 0xE4, 0x00, 0x00, 0x51, 0xE3,
            0xEA, 0x21, 0xC1, 0x15, 0xEB, 0x21, 0xC1, 0x15,
            0xEC, 0x21, 0x81, 0x15, 0xF0, 0x21, 0xC1, 0x15,
            0x04, 0x00, 0x53, 0xE1, 0xF7, 0xFF, 0xFF, 0x1A,
            0x2C, 0x00, 0x9D, 0xE5, 0x88, 0x0A, 0x90, 0xE5,
            0x01, 0x0A, 0x80, 0xE2, 0x08, 0x08, 0x90, 0xE5,
            0x0C, 0x00, 0x90, 0xE5, 0x08, 0x00, 0x90, 0xE5,
            0x04, 0x30, 0x80, 0xE2, 0x1C, 0x40, 0x80, 0xE2,
            0x04, 0x10, 0x93, 0xE4, 0x00, 0x00, 0x51, 0xE3,
            0xEA, 0x21, 0xC1, 0x15, 0xEB, 0x21, 0xC1, 0x15,
            0xEC, 0x21, 0x81, 0x15, 0xF0, 0x21, 0xC1, 0x15,
            0x04, 0x00, 0x53, 0xE1, 0xF7, 0xFF, 0xFF, 0x1A,
            0x1F, 0x00, 0xBD, 0xE8, 0x70, 0x11, 0xF4, 0xEA,
            0xA4, 0x77, 0x6E, 0x00, 0x0C, 0x0C, 0x0C, 0x0C
        };

        address = 0x00;
        memcpy((void *)(address + offset), buffer, 0x90);

        WRITEU32(0x0029A048, 0xEA0BEE6C);
    } else {
        WRITEU32(0x0029A048, original);
    }
    updateBattleStats();
    disableCheat(i_maxBattleStats);
}
